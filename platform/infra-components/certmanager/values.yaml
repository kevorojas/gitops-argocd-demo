# Cert-Manager Helm Chart Values
# Referencia: https://artifacthub.io/packages/helm/cert-manager/cert-manager

# Configuración global
global:
  priorityClassName: ""
  rbac:
    create: true
  podSecurityPolicy:
    enabled: false
    useAppArmor: true
  leaderElection:
    namespace: "cert-manager"

# Instalar CRDs
installCRDs: true

# Configuración principal del controlador cert-manager
replicaCount: 1

# Estrategia de deployment
strategy:
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 0
    maxUnavailable: 1

# Configuración de la imagen
image:
  registry: quay.io
  repository: jetstack/cert-manager-controller
  # tag: se usa la versión del chart
  pullPolicy: IfNotPresent

# Configuración de ServiceAccount
serviceAccount:
  create: true
  name: ""
  annotations: {}
  automountServiceAccountToken: true

# Configuración de recursos
resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 10m
    memory: 32Mi

# Security Context
securityContext:
  runAsNonRoot: true

# Pod Security Context
podSecurityContext:
  runAsNonRoot: true

# Configuración de nodos
nodeSelector: {}
tolerations: []
affinity: {}

# Configuración de DNS para ACME DNS01
dns01RecursiveNameservers: "8.8.8.8:53,1.1.1.1:53"
dns01RecursiveNameserversOnly: false

# Configuración de métricas
prometheus:
  enabled: true
  servicemonitor:
    enabled: false
    prometheusInstance: default
    targetPort: 9402
    path: /metrics
    interval: 60s
    scrapeTimeout: 30s

# Configuración del webhook
webhook:
  replicaCount: 1
  
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 0
      maxUnavailable: 1
  
  image:
    registry: quay.io
    repository: jetstack/cert-manager-webhook
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 32Mi
  
  securityContext:
    runAsNonRoot: true
  
  hostNetwork: false
  serviceType: ClusterIP
  
  # Configuración específica del webhook
  config:
    # Configuración adicional del webhook si es necesaria

# Configuración del CA Injector
cainjector:
  enabled: true
  replicaCount: 1
  
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 0
      maxUnavailable: 1
  
  image:
    registry: quay.io
    repository: jetstack/cert-manager-cainjector
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 32Mi
  
  securityContext:
    runAsNonRoot: true

# Configuración de startup API check
startupapicheck:
  enabled: true
  
  # Configuración de timeout
  timeout: 1m
  
  # Configuración de backoff
  backoffLimit: 4
  
  # Configuración de Job
  jobAnnotations:
    helm.sh/hook: post-install
    helm.sh/hook-weight: "1"
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
  
  image:
    registry: quay.io
    repository: jetstack/cert-manager-ctl
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 32Mi
  
  securityContext:
    runAsNonRoot: true

# Configuración adicional para el controlador
extraArgs: []
extraEnv: []

# Configuración de volumes adicionales
volumes: []
volumeMounts: []

# Configuración de anotaciones y etiquetas para pods
podAnnotations: {}
podLabels: {}

# Configuración de disruption budget
podDisruptionBudget:
  enabled: false

# Configuración de feature gates
featureGates: ""
